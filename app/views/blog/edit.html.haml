#message_window.form
  = make_if_error_messages_for @blog_post
  - form_for @blog_post do |f|
    %h1.field.message
      = f.label :title
      = f.text_field :title
    %p.field= f.text_area :body
    %p.field
      = f.label :groups
      = f.text_field :groups, :id => dom_id(@blog_post, :groups),
        :onkeyup => 'update_readers_from_groups.deploy(0.6)',
        :onfocus => "$('readers').show()", :onblur => "$('readers').hide()"
    %div#readers.preview{:style => 'display: hidden;'}= render :template => 'blog/readers'
    :javascript
      update_readers_from_groups = new DelayedFunction(function () {
        #{update_readers_from_groups}
      });
    %ul.field
      %li.check_box
        = check_box_tag :mail?, 'yes'
        = label_tag :mail?, t('mail?', :scope => 'views.labels.blog_post')
        - if @blog_post.is_mailed?
          %span.error
            (#{t 'views.labels.blog_post.already_mailed'})  
      %li.check_box
        = f.check_box :is_published
        = f.label :is_published, t('publish?', :scope => 'views.labels.blog_post')
    %p.response= submit_tag 'Speichern!'
      
