<ul id="categories">
  <% for category in @categories %>
    <li>
      <% unless category === @category %>
        <%= link_to(
          category.name,
          category_path(category.url_hash),
          :class => positional_class(category, @categories)
        ) %>
      <% else %>
        <%= link_to(
          category.name,
          category_path(category.url_hash),
          :class => positional_class(category, @categories, 'selected')
        ) %>
        <% unless @category.subcategories.empty? %>
          <ul class="subcategory">
            <% for subcategory in @category.subcategories %>
              <li>
                <% unless subcategory === @subcategory %>
                  <%= link_to(
                    subcategory.name,
                    subcategory_path(subcategory.url_hash),
                    :class => positional_class(subcategory, @category.subcategories)
                  ) %>
                <% else %>
                  <%= link_to(
                    subcategory.name,
                    subcategory_path(subcategory.url_hash),
                    :class => positional_class(
                      subcategory,
                      @category.subcategories,
                      'selected')
                  ) %>
                <% end %>
              </li>
            <% end %>
          </ul>
        <% end %>
      <% end %>
    </li>
  <% end %>
</ul>
<div id="content">
  <%= yield %>
</div>
